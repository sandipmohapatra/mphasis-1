<html>
<body bgcolor=cyan>
<form action="second" method="get">
<h1><center>Student Registration Page</center></h1><hr>
<table>
<tr><td>Enter your name<td><input type=text name=t1 size=20></tr>
<tr><td>Enter your email<td><input type=text name=t2 size=20></tr>
<tr><td>Enter your address<td><input type=text name=t3 size=20></tr>
<tr><td>Enter your phone no<td><input type=text name=t4 size=20></tr>
<tr><td><td><input type=submit value=submit></tr>
</table>
</form>
</body>
</html>
----------------------------------------------------------
import java.io.*;
import javax.servlet.*;
import java.sql.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/second")
public class second extends GenericServlet
{
	@Override
	public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException 
	{
		PrintWriter pw=res.getWriter();		//to print on the browser the response
		res.setContentType("text/html");
		String name=req.getParameter("t1");
		String email=req.getParameter("t2");
		String address=req.getParameter("t3");
		String phoneno=req.getParameter("t4");
		pw.println("The name is "+name);
		pw.println("<br>");
		pw.println("The email is "+email);
		pw.println("<br>");
		pw.println("The address is "+address);
		pw.println("<br>");
		pw.println("The phoneno is "+phoneno);
		try
		{
			Class.forName("oracle.jdbc.driver.OracleDriver");
			Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","1234");
			PreparedStatement st=con.prepareStatement("insert into mphasisstudx values(?,?,?,?)");
			st.setString(1, name);
			st.setString(2, email);
			st.setString(3, address);
			st.setString(4,phoneno);
			st.execute();
			System.out.println("row inserted");
		}
		catch(Exception ae)
		{
			ae.printStackTrace();
		}
			}
}
------------------------------------------------------------------------------
example-2
------------------
<html>
<body bgcolor=cyan>
<form action="second" method="get">
<h1><center>Student Registration Page</center></h1><hr>
<table>
<tr><td>Enter your name<td><input type=text name=t1 size=20></tr>
<tr><td>Enter your email<td><input type=text name=t2 size=20></tr>
<tr><td>Enter your address<td><input type=text name=t3 size=20></tr>
<tr><td>Enter your phone no<td><input type=text name=t4 size=20></tr>
<tr><td><td><input type=submit value=Insert name=btn>
<input type=submit value=Update name=btn>
<input type=submit value=Delete name=btn>
<input type=reset value=Reset name=btn>
</tr>
</table>
</form>
</body>
</html>
-----------------------------------------------------------------
import java.io.*;
import javax.servlet.*;
import java.sql.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/second")
public class second extends GenericServlet
{
	@Override
	public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException 
	{
		PrintWriter pw=res.getWriter();		//to print on the browser the response
		res.setContentType("text/html");
		String name=req.getParameter("t1");
		String email=req.getParameter("t2");
		String address=req.getParameter("t3");
		String phoneno=req.getParameter("t4");
		String button=req.getParameter("btn");
		pw.println("The name is "+name);
		pw.println("<br>");
		pw.println("The email is "+email);
		pw.println("<br>");
		pw.println("The address is "+address);
		pw.println("<br>");
		pw.println("The phoneno is "+phoneno);
		
				try
		{
			Class.forName("oracle.jdbc.driver.OracleDriver");
			Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","1234");
			if(button.equalsIgnoreCase("Insert"))
				{
			PreparedStatement st=con.prepareStatement("insert into mphasisstudx values(?,?,?,?)");
			st.setString(1, name);
			st.setString(2, email);
			st.setString(3, address);
			st.setString(4,phoneno);
			st.execute();
			System.out.println("row inserted");
				}
			else if(button.equalsIgnoreCase("update"))
			{
		PreparedStatement st=con.prepareStatement("update mphasisstudx set email=?,address=?,phoneno=? where name=?");
		
		st.setString(1, email);
		st.setString(2, address);
		st.setString(3,phoneno);
		st.setString(4, name);
		st.execute();
		System.out.println("row updated ");
			}
			else if(button.equalsIgnoreCase("delete"))
			{
		PreparedStatement st=con.prepareStatement("delete from mphasisstudx where name=?");
		st.setString(1, name);
		st.execute();
		System.out.println("row deleted");
			}
			else
			{
				pw.println("Reset");				
			}
		}
		catch(Exception ae)
		{
			ae.printStackTrace();
		}
			}
}
----------------------------------------------------------------------------------
Servlet API
------------------------
The javax.servlet and javax.servlet.http packages represent interfaces and classes for servlet api.
Interfaces in javax.servlet package
Servlet
ServletRequest
ServletResponse
RequestDispatcher
ServletConfig
ServletContext
SingleThreadModel
Filter
FilterConfig
FilterChain
ServletRequestListener
ServletRequestAttributeListener
ServletContextListener
ServletContextAttributeListener
------------------------------------------------------------------------------------------
Classes in javax.servlet package
There are many classes in javax.servlet package. They are as follows:
GenericServlet
ServletInputStream
ServletOutputStream
ServletRequestWrapper
ServletResponseWrapper
ServletRequestEvent
ServletContextEvent
ServletRequestAttributeEvent
ServletContextAttributeEvent
ServletException

--------------------------------------------------------------------------------
There are many interfaces in javax.servlet.http package. They are as follows:

HttpServletRequest
HttpServletResponse
HttpSession
HttpSessionListener
HttpSessionAttributeListener
HttpSessionBindingListener
HttpSessionActivationListener

Classes in javax.servlet.http package
---------------------------------------------------------------------------------

There are many classes in javax.servlet.http package. They are as follows:

HttpServlet
Cookie
HttpServletRequestWrapper
HttpServletResponseWrapper
HttpSessionEvent

--------------------------------------------------------------------------

SERVLET
-----------------
1)A servlet is a server side component.A servlet is a java programming language class used to extend the capabilities of servers that host application accessed via a request-response programming model.
2)servlet are durable object they remain in memory and specially instructed to be destroyed .servlet will be loaded on the address space of webserver.

What is servlet Container?
The servlet container is a part of webserver or application server that provide the network service over which request and response.A servlet container also contains and manages servlet through their life cycle.
A servlet container can also be built into a host web server and installed as an add-on component to webserver.

Types of servlets:-
------------------------
1)generic servlet are protocal independent.
2)Http servlet are protocal specific they can be invoke only with the http protocol.

when implementing a generic service we must extend GenericServlet class which provides the java servlet api.

when implementing a http service we must extends HttpServlet class which provides methods such as doGet and doPost.

two packages required to build servlet
1)javax.servlet
2)javax.servlet.http

Life cycle of servlet:-
----------------------------
1)init():-server invokes init() when servlet is first loaded into the webserver memory.This method is used to initialize new servlet instance.Return type is void.

2)getServletConfig():- Return type is servlet config.

3)service():-To activate the servlet instance to handle the client request.

4)getServletInfo():-Return String.

5)destroy():-It is called by the webserver to destroy the existing servlet instance,or clean up any resource the servlet is consuming.



What is servletContext?
Servlet context is a part of javax.servlet.*;
Servlet context is also called as application object.
Servlet context is used to obtain the information about environment on which servlet is running.
For every web-application the web-container needs the deployment descripter .if there is no error the web Container will create servletContext object for the application.There may be multiple servlet context object inside a web Container.

Servlet context is one per one web application .To communicate with servlet Conatiner we use ServletContext object.

Methods inside ServletContext interface are
1)String getInitParameter(String name)
2)void setAttribute(String name)
3)Object getAttribute()

In servlet application setAttribute() method is used to create java object.If any object previously present it overrides that object.
To get the object stored in the request object we use request.getAttribute();
Request.removeAttribute() is use to remove attribute from request Object.
HTTP Servlet:-
-----------------------
1)SendRedirect() :-we can redirect the browser to a resource part of the same application.
we can redirect another web application running through the same web container.

2)RequestDispatcher :-
it is an interface inside javax.servlet.*;
it contains two methods :-
1)forward(ServletRequest req,ServletResponse res)
2)include(ServletRequest req,ServletResponse res)
RequestDispatcher is to forward the request to other servlet or include the output of another servlet as a part of the response.


To build a web application to be stateful that can remember the state of the client we use 
1)hidden field 2)cookies 3)session object 4)url rewritting





Cookies :-
cookies is a small amount of information set by the server on the client machine.

It is useful for session tracking for each client request a cookies can provide client session id.

getSession(true) :-It creates a new session and set the value from request object.
getSession(false):-The web container search for the old session object.

servlets are multithreaded for each client request a separate thread will start.

Difference between GET and POST?
get and post are used to process the request of a client .get method is a part of url.so we can send less amount of data through get.the amount of information limited is 240-255 character.
But using post we can post larger amount of data through hidden field.
 
Session are more secure and fast because they are stored at server side.
Session has to be used internally with cookies or urlrewritting to maintain session id.


Servlet Filters:-
--------------------
1)init() :-calls the filter into service and sets the filter's configuration object.
2)doFilter():- performs the filtering task.
3)getFilterConfig():- Return the filter's configuration object.
4)destroy():-Removes a filter from service.

use of filter:-
---------------
1)securing application
2)help to safe guard the data.

Servlet Listener :-
--------------------------
It is a interface
There are 2 types :-
1)ServletContextListener
It is executed once the application is deployed in the application server.
2)HttpSessionListener
It is very useful in maintaining data available throughout the life cycle of web application until it is invalid or closed.
Uses:-
------
1)to keep the track of no of concurrent clients using a web application.
2)database need to be loaded on startup and saved while shut down.
---------------------------------------------------------------------------------------------
example-3
--------------------
<html>
<body bgcolor=cyan>
<form action="second" method="get">
<h1><center>Student Registration Page</center></h1><hr>
<table>
<tr><td>Enter your name<td><input type=text name=t1 size=20></tr>
<tr><td>Enter your email<td><input type=text name=t2 size=20></tr>
<tr><td>Enter your address<td><input type=text name=t3 size=20></tr>
<tr><td>Enter your phone no<td><input type=text name=t4 size=20></tr>
<tr><td><td><input type=submit value=Insert name=btn>
<input type=submit value=Update name=btn>
<input type=submit value=Delete name=btn>
<input type=reset value=Reset name=btn>
</tr>
</table></form></body></html>
-----------------------------------------------------------------------------------
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/second")
public class second extends HttpServlet
{
	@Override
	public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException 
	{
		PrintWriter pw=res.getWriter();		//to print on the browser the response
		res.setContentType("text/html");
		String name=req.getParameter("t1");
		String email=req.getParameter("t2");
		String address=req.getParameter("t3");
		String phoneno=req.getParameter("t4");
		String button=req.getParameter("btn");
		pw.println("The name is "+name);
		pw.println("<br>");
		pw.println("The email is "+email);
		pw.println("<br>");
		pw.println("The address is "+address);
		pw.println("<br>");
		pw.println("The phoneno is "+phoneno);
		
				try
		{
			Class.forName("oracle.jdbc.driver.OracleDriver");
			Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","1234");
			if(button.equalsIgnoreCase("Insert"))
				{
			PreparedStatement st=con.prepareStatement("insert into mphasisstudx values(?,?,?,?)");
			st.setString(1, name);
			st.setString(2, email);
			st.setString(3, address);
			st.setString(4,phoneno);
			st.execute();
			System.out.println("row inserted");
			res.sendRedirect("Login.html");
				}
			else if(button.equalsIgnoreCase("update"))
			{
		PreparedStatement st=con.prepareStatement("update mphasisstudx set email=?,address=?,phoneno=? where name=?");
		
		st.setString(1, email);
		st.setString(2, address);
		st.setString(3,phoneno);
		st.setString(4, name);
		st.execute();
		System.out.println("row updated ");
			}
			else if(button.equalsIgnoreCase("delete"))
			{
		PreparedStatement st=con.prepareStatement("delete from mphasisstudx where name=?");
		st.setString(1, name);
		st.execute();
		System.out.println("row deleted");
			}
			else
			{
				pw.println("Reset");				
			}
		}
		catch(Exception ae)
		{
			ae.printStackTrace();
		}
			}
}
------------------------------------------------------------------------------------
<html>
<body bgcolor=cyan>
<form action="Login" method="get">
<h1><center>Student Login Page</center></h1><hr>
<table>
<tr><td>Enter Username<td><input type=text name=t1 size=20></tr>
<tr><td>Enter Password<td><input type=password name=t2 size=20></tr>
<tr><td><td><input type=submit value=Login></tr>
</table></form></body>
</html>
------------------------------------------------------------------------
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/Login")
public class Login extends HttpServlet
{
	@Override
	public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException 
	{
		PrintWriter pw=res.getWriter();		//to print on the browser the response
		res.setContentType("text/html");
		String name=req.getParameter("t1");
		String email=req.getParameter("t2");
						try
		{
			Class.forName("oracle.jdbc.driver.OracleDriver");
			Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","1234");
		PreparedStatement ps=con.prepareStatement("select * from mphasisstudx where name=? and email=?");
		ps.setString(1,name);
		ps.setString(2,email);
			ResultSet rs=ps.executeQuery();
			while(rs.next())
			{
				res.sendRedirect("success.html");
			}
			res.sendRedirect("failure.html");
		}
				catch(Exception ae)
				{
				}
	}
				}
----------------------------------------------------------------------
success.html
<h1>Login Success</h1>
-------------------------
failure.html
<h1>Login Failure</h1>
----------------------------------------
Assignment
----------------------------
Shopping Cart work 
-----------------------------
Example-4
--------------------------
<html>
<body bgcolor=yellow>
<form action=firstservlet method=post>
<center><h1>LOGIN FORM</h1><hr><br><br>
Enter user name<input type=text name=t1 size=20><br>
Enter password<input type=text name=t2 size=20><br>
<input type=submit value=login>
</form>
</body>
</html>
-----------------------------------------------------------------
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/firstservlet")
public class firstservlet extends HttpServlet
{
public void service(HttpServletRequest req,HttpServletResponse res)
{
try
{
res.setContentType("text/html");
PrintWriter pw=res.getWriter();
String a=req.getParameter("t1");
String b=req.getParameter("t2");
HttpSession ses=req.getSession(true);//new session is created
ses.setAttribute("x",a);//x is a session object
ses.setAttribute("y",b);//y is a session object
pw.println("<html>");
pw.println("<form action=secondServlet method=post>");
pw.println("enter address:");
pw.println("<input type=text name=t3 size=20><br>");
pw.println("enter phone no:");
pw.println("<input type=text name=t4 size=20><br>");
pw.println("<input type=submit value=submit><br>");
pw.println("</form></html>");
pw.close();
}
catch(Exception ab)
{
	ab.printStackTrace();
	}
}}
--------------------------------------------------------------------------
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/secondServlet")
public class secondServlet extends HttpServlet
{
public void service(HttpServletRequest req,HttpServletResponse res)
{
try
{
res.setContentType("text/html");
PrintWriter pw=res.getWriter();
String c=req.getParameter("t3");
String d=req.getParameter("t4");
HttpSession ses=req.getSession(false);//same session
ses.setAttribute("g",c);//session object is g
ses.setAttribute("h",d);//session object is h
pw.println("<html>");
pw.println("<form action=third method=post>");
pw.println("enter hobby:");
pw.println("<input type=text name=t5 size=20><br>");
pw.println("enter email:");
pw.println("<input type=text name=t6 size=20><br>");
pw.println("<input type=submit value=submit><br>");
pw.println("</form></html>");
pw.close();
}
catch(Exception ae)
{}
}}
----------------------------------------------------------------
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/third")
public class third extends HttpServlet
{
public void service(HttpServletRequest req,HttpServletResponse res)
{
try
{
res.setContentType("text/html");
PrintWriter pw=res.getWriter();
String e=req.getParameter("t5");
String f=req.getParameter("t6");
HttpSession ses=req.getSession(false);
ses.setAttribute("i",e);
ses.setAttribute("j",f);
String a=(String)ses.getAttribute("x");
String b=(String)ses.getAttribute("y");
String c=(String)ses.getAttribute("g");
String d=(String)ses.getAttribute("h");
pw.println("the name is :"+a);
pw.println("the password is :"+b);
pw.println("the address is :"+c);
pw.println("the phone no is :"+d);
pw.println("the hobby is :"+e);
pw.println("the email is :"+f);
pw.close();
}
catch(Exception ae)
{}
}}
-------------------------------------------------------------------------
JSP
----------------------
<html>
<body bgcolor=cyan>
<form action="second.jsp">
<h1><center>Employee Registration Page</center></h1><hr>
<table>
<tr><td>Enter your empid<td><input type=text name=t1 size=20></tr>
<tr><td>Enter your Name<td><input type=text name=t2 size=20></tr>
<tr><td>Enter your Phoneno<td><input type=text name=t3 size=20></tr>
<tr><td>Enter your Address<td><input type=text name=t4 size=20></tr>
<tr><td><td><input type=submit value=Submit></tr>
</table>
</form>
</body>
</html>
-----------------------------------------------
<%@page import="java.sql.*" %>
<% String a=request.getParameter("t1");
String b=request.getParameter("t2");
String c=request.getParameter("t3");
String d=request.getParameter("t4");%>

<%out.println("The employeeId is "+a);
out.println("</br>");
out.println("The employee Name is "+b);
out.println("</br>");
out.println("The phone no is "+c);
out.println("</br>");
out.println("The Address is "+d);%>

<%
try		{
			Class.forName("oracle.jdbc.driver.OracleDriver");
		Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","1234");
			PreparedStatement ps=con.prepareStatement("insert into mphasisstudy values(?,?,?,?)");
			ps.setString(1,a);
			ps.setString(2,b);
			ps.setString(3,c);
			ps.setString(4,d);
			ps.execute();
			out.print("row inserted");
}
catch(Exception ae)
{
	ae.printStackTrace();
}
			%>
-----------------------------------------------------------------------
<html>
<body bgcolor=cyan>
<form action="second.jsp">
<h1><center>Employee Registration Page</center></h1><hr>
<table>
<tr><td>Enter your empid<td><input type=text name=t1 size=20></tr>
<tr><td>Enter your Name<td><input type=text name=t2 size=20></tr>
<tr><td>Enter your Phoneno<td><input type=text name=t3 size=20></tr>
<tr><td>Enter your Address<td><input type=text name=t4 size=20></tr>
<tr><td><td><input type=submit value=Select></tr>
</table>
</form>
</body>
</html>
---------------------------------------------------------------------
<%@page import="java.sql.*" %>
<% String a=request.getParameter("t1");
String b=request.getParameter("t2");
String c=request.getParameter("t3");
String d=request.getParameter("t4");%>

<%out.println("The employeeId is "+a);
out.println("</br>");
out.println("The employee Name is "+b);
out.println("</br>");
out.println("The phone no is "+c);
out.println("</br>");
out.println("The Address is "+d);%>

<%
try		{
			Class.forName("oracle.jdbc.driver.OracleDriver");
		Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","system","1234");
			PreparedStatement ps=con.prepareStatement("select * from mphasisstudy where empid=?");
			ps.setString(1,a);
			out.print("<table width=50% border=1>");
			out.print("<caption>Employee Details</caption>");
			ResultSet rs=ps.executeQuery();
			ResultSetMetaData rsmd=rs.getMetaData();
			int tot=rsmd.getColumnCount();
			out.print("<tr>");
			for(int i=1;i<=tot;i++)
			{
				out.println("<th>"+rsmd.getColumnName(i)+"</th>");
			}
			out.print("</tr>");
			while(rs.next())
			{
				out.print("<tr><td>"+rs.getString(1)+"<td>"+rs.getString(2)+"<td>"+rs.getString(3)+"<td>"+rs.getString(4)+"</tr>");
				}
out.print("</table>");
}
catch(Exception ae)
{
	ae.printStackTrace();
}
			%>
-------------------------------------------------------------------------------------------------
example -6
----------------------
addcookies
------------------
<html>
     <head>
     </head>
      <body bgcolor="orange">
          <h1>store the data into cookies</h1>
          <form action="addcookies">
          <b> Enter the name of  cookie</b>
          <input type="text" name="n1" size="6"><br><br>
          <b> Enter the value of  cookie </b>
          <input type="text" name="n2" size="6"><br><br>
          <input type="submit" value="submit">
          </form>
    </body>
</html>
--------------------------------------------
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/addcookies")
public class addcookies extends HttpServlet
 {
     protected void service(HttpServletRequest request, HttpServletResponse response)
             throws ServletException, IOException {
          response.setContentType("text/html");
          PrintWriter out = response.getWriter();
           try {
            String name1=request.getParameter("n1");
            String value1=request.getParameter("n2");
            Cookie cc=new Cookie(name1, value1);
            response.addCookie(cc);
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet addcookies</title>");            
            out.println("</head>");
            out.println("<body bgcolor='blue'>");
            out.println("Name of first cookie = ");
            out.println(name1);
            out.println("<br>value of first cookie = ");
            out.println(value1);
            out.println("</body>");
            out.println("</html>");
        } finally {               
               out.close();
          }     }}
------------------------------------------------------------------
getcookies
----------------------
<html>
     <body bgcolor="orange">
            <h1>To retrieve the data from cookies</h1>
             <form action="getcookies">
         
              <B> CLICK THE BUTTON TO FIRE THE COOKIE</B><br>
              <input type="submit" value="submit"/>
             </form>
    </body>
</html>
-----------------------------------------------------
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/getcookies")
public class getcookies extends HttpServlet 
{
    public void service(HttpServletRequest request, HttpServletResponse response)
             throws ServletException, IOException
 {
          response.setContentType("text/html");
          PrintWriter out = response.getWriter();
         try {   
            out.println("<html>"); 
             out.println("<head>");
            out.println("<title>Servlet getcookies</title>");            
            out.println("</head>");
            out.println("<body bgcolor='blue'>");
            Cookie cookies[]=request.getCookies();
            for(int i=0;i<cookies.length;i++)
            {
                String name=cookies[i].getName();
                String value=cookies[i].getValue();
                out.println("<br> cookie name="+name+"<br>");
                out.println("<br> cookie value="+value);
            }
            out.println("</body>");
           out.println("</html>");
                  } finally {               
               out.close();       }     }}
---------------------------------------------------------

Reliance Fresh
-----------------------------------------------------
create an application for a grocery shop.
having forms for
menu ---->
Registration         Purchase 	sales	Admin
-------------------------------------------------------------------------------------
1)Registration for customer/login 
2)purchase for shop from different vendors  (proid,name,quantity,cost)----------------CRUD
3)sales to customers
4)feedBack of customer
------------------------------------

shopkeeper is admin and see daily reports
for purchase and sales.
---------------------------------------------------------------------------------------------------------------------
1)The code for JSP is small as compared to servlet.
2)in jsp the html code will be separate and the JSP code will be separate.
3)The jsp code is converted to servlet when it runs internally.
4)in jsp we have jsp action tags and implicit objects.
5)jsp will take more time than servlet.
6)there are 4 scopes:- 1)request 2)session 3)response 4)Application

jsp life cycle :-
------------------------
1)jspInit()---Initialization
2)_jspService()--execution
3)jspDestroy()--clean up
in this jsp is 1)compilation 2)Initialization 3)execution 4)clean up

---------------------------------------------- 
JAVA SERVER PAGES
----------------------------------------------
it is classified into 
1)directives
2)scripting elements
3)standard action
4)declaration tag<%!int a=10%>
5)expression tag <%=sum%>
6)comment tag <!-- -->

Directives:-
---------------
Jsp directives are messages for jsp engine.they donot produce output.they tell the engine what to do with rest of the jsp page.it is enclosed with <%@-------%> tag
the three primary directives are:-
1)page 
2)include
3)custom tag libraries

1)page directive:-
Found at the top of the jsp page.there are 11 attributes in this directive.

1)info :-<%@ page info="this is a welcome page"%>
to add summary about the page.

2)language:-<%@ page language="java"%>
to specify scripting langauge used in the page

3)content type:-<%@ page contentType="text/html"%>
this is used to indicate MIME type

4)Import :-<%@ page import ="java.util.Date"%>
it is used to extend java classes.

5)Session :-<%@ page session="false"%>
It is used to indicate JSP page participates in session management.

6)Buffer :-<%@ page buffer="12kb"%>
to control buffered output for a jsp page.

7)AutoFlush :-<%@ page autoFlush="true"%>
It means the output will automatically flush.

8)isThreadSafe :-<%@ page isThreadSafe="false"%>
it is capable to responding multiple requests.

9)Error Page :-<%@ page errorPage="error.jsp"%>
It is used to display an alternate page if error occurs.

10)isErrorPage :-<%@page isErrorPage="true"%>
It is a common jsp page for error.

11)extends :-<%@page extends="com.student.result"%>
it is used for super class used by jsp container used mainly for custom tag libraries.

Include Directives:-
-----------------------------
It lets us to include files at the time the jsp page is translated into servlet.
it treats the contents of the file to be included as if it were part of the original page.It include resources at runtime.
<%@ include file="include.jsp"%>

Custom tag libraries :-
---------------------------------
it is also called jsp tag extensions.It provides a way of encapsulating reusable functionality on jsp page.It has ability to generate dynamic content by using java code.

Scripting element:-
------------------------
1)declaration :-to declare variable and method <% int i=0;%>
2)scriptlets :-It contain the java code.
3)expression tag:-It is used to retrive value <%=user%>
4)comment tag:-used for comments.<!-- this is jsp comments--%>

Action Tag:-
-----------------
1)<jsp :plugins>
2)<jsp :include>
3)<jsp :forward>
4)<jsp :param>
5)<jsp :useBean>
6)<jsp :getProperty>
7)<jsp :setProperty>


Implicit object:-
-----------------------
1)out-- PrintWriter
2)response-- HttpServletResponse
3)request-- HttpServletRequest
4)page-- this a jsp page scope
5)config-- ServletConfig
6)session-- HttpSession
7)application-- ServletContext
8)execption-- Exception
9)pageContext - JspWriter
----------------------------------------------
Example-1
---------------------



<% out.println("<h1><font color='red'>welcome to jsp page");%>
 <%
        int a=100,b=20,sum;
        sum=a+b;
        out.println("sum of two number is"+sum);
        %>
<h1>declaration Tag</h1>
        <%!int sum,a,b=20;%>         <!-- global declaration -->
        
<%
        a=10;
        sum=a+b;
        out.println("sum of number is"+sum+"<br>");
 %>
-----------------------------------------------------------------------------------------
Expression tag
<% =5+7 %>
 <h1>Expression Tag</h1>
        <%! int a,b,sum;%>
        <%
        a=10;
        b=20;
        sum=a+b;
        %>
         <font color="red" size="8">The sum of <%=a%>,<%=b%> is<%=sum%>
</font>

-----------------------------------------------------------------------------------------------
 page directive
------------------------------------------------------
First.html
------------------------
<h1>number validation</h1>
        <form action="jsp6.jsp">
            Age=<input type="text" name="n1">
            <input type="submit" value="submit">
       </form>
-----------------------------------------------------------------------
jsp6.jsp
----------------------
<%@page errorPage="error.jsp" %>
<%!String age1;
int age;
%>
<% age1=request.getParameter("n1");
   age=Integer.parseInt(age1);
   out.println("The age ="+age);
%>
--------------------------------------------------------
error.jsp
-------------------
<%@page isErrorPage="false"%>  <!-- This is not a error page-->
<%out.println("Enter only the number");%>

--------------------------------------------------------
jsp8.jsp
-----------------------
<a href="First.html">age</a>
     <%! String age;
        int age1;
        %>
        <%
        try{
            age=request.getParameter("n1");
            age1=Integer.parseInt(age);
            out.println("AGE="+age1);
           }
        catch(Exception e)
        {
          out.println("please enter only the number");
          %>
           <jsp:include page="jsp8.jsp"></jsp:include>
<%           }       %>
-----------------------------------------------------------------------------------------

 <h1>for loop</h1>
        <select name="number">
            <%
            for(int i=0;i<100;i++)
            {
            %>
            <option value="<%=i%> "><%=i%> </option>
            <%
            }
            %>
        </select>


------------------------------------------------------------------------
<h1>for loop</h1>
        <select name="number">
            <%int i; 
           
            for(i=0;i<100;i++)
            {
            %>
            
            <option value="<%=i%> "><%=i%> </option>
           <% } %>
        </select>
-------------------------------------------------------------------------

action

<%! int a=3,b=10; %>
        <%
            if(a<b)
            {
              out.println("yes");
         %>
        <jsp:include page="ll.jsp"></jsp:include>
        <% 
           }
          else {
             out.println("no");
        %>
<jsp:forward page="kk.jsp"></jsp:forward>
    <%       }    %>
  
---------------------------------------------------------
<html>
<body bgcolor=cyan>
<form action=test.jsp>
<table>
<tr><td>Enter your name<td><input type=text name=t1 size =20><tr>
<tr><td>Enter your address<td><input type=text name=t2 size =20><tr>
<tr><td>Enter your password<td><input type=password name=t3 size =20><tr>
<tr><td>Enter your Qualification<td><select name=t4>
<option>Mca</option>
<option>Bca</option>
<option>Mcom</option>
<option>MTech</option>
<option>Diploma</option>
<option>Bsc</option>
</select></td><tr>
<tr><td><td><input type=submit value=submit></tr>
</table></form></body></html>
--------------------------------------------


<%@page  import="java.sql.*" %>
        <%String x,y,z,p;%>
        <%x=request.getParameter("t1");
         y=request.getParameter("t2");
         z=request.getParameter("t3");
         p=request.getParameter("t4");
        try
         {  Class.forName("oracle.jdbc.driver.OracleDriver");
          Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system","1234");
          PreparedStatement stmt=con.prepareStatement("insert into stude values(?,?,?,?)");
          stmt.setString(1,x);          stmt.setString(2,y);
          stmt.setString(3,z);          stmt.setString(4,p);
          stmt.execute();}
catch(Exception ae){}
%>
------------------------------------------------------------
example- RequestDispatcher
---------------------------------------------------------------
<html>
<body bgcolor=yellow>
<form action="firstservlet" method=get>
<center><h1>LOGIN FORM</h1><hr><br><br>
Enter user name<input type=text name=t1 size=20><br>
Enter password<input type=text name=t2 size=20><br>
<input type=submit value=login>
</form>
</body>
</html>
---------------------------------------------------
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/firstservlet")
public class firstservlet extends HttpServlet
{
public void doGet(HttpServletRequest req,HttpServletResponse res)
{try
{
res.setContentType("text/html");
PrintWriter pw=res.getWriter();
RequestDispatcher rd=req.getRequestDispatcher("secondServlet");
rd.forward(req,res);
pw.close();
}
catch(Exception ae)
{}}}
---------------------------------------------------------
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.WebServlet;
@WebServlet("/secondServlet")
public class secondServlet extends HttpServlet
{
public void doGet(HttpServletRequest req,HttpServletResponse res)
{
try
{
res.setContentType("text/html");
PrintWriter pw=res.getWriter();
String s=req.getParameter("t1");
String t=req.getParameter("t2");
pw.println("the user name is "+s);
pw.println("the password is "+t);
}
catch(Exception ae)
{} }}

-----------------------------------------------------------------------------------
JspBean
------------------
<html>
<head><center>UseBean</head><br><br><br>
<form method="post" action="bean.jsp">
UserName:<input type=text name=t1><br><br><br>
Language:<input type=text name=t2><br><br><br>
<input type=submit value="GetDetails">
</form>
</html>
---------------------------------
package mybean;
public class srbean
{
String language;
public void setLanguage(String la)
{
this.language=la;
}
public String getLanguage()
{
return language;
}
public String getComment()
{
if(language.equals("java"))
return "The King Of Object Oriented Language";
if(language.equals("dotnet"))
return "MicroSoft Technology";
else
return "Soory No Details";
}
}
-------------------------------------
<jsp:useBean id="sr" scope="page" class="mybean.srbean" />
<html>
<head>
<body>
<%! String s;%>
<% s=request.getParameter("t2");%>
<jsp:setProperty name="sr" property="language" value="<%=s%>" />
<jsp:getProperty name="sr" property="language" />
<jsp:getProperty name="sr" property="comment" />
</body>
</html>

----------------------------------------------------------------































